<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flashback Game</title>
    <script>
        // Apply theme immediately to prevent flash
        (function() {
            const savedTheme = localStorage.getItem('theme');
            const theme = savedTheme || 'dark';
            document.documentElement.setAttribute('data-theme', theme);
        })();
    </script>
    <link rel="stylesheet" href="styles.css">
    <script src="lz-string.min.js"></script>
</head>
<body>
    <div class="top-controls">
        <button class="copy-link-btn" id="copy-link-btn" aria-label="Copy shareable link" title="Shareable link"><span class="btn-emoji">ğŸ”—</span><span class="btn-text"> Shareable link</span></button>
        <button class="debug-toggle" id="debug-toggle" aria-label="Debug mode is off" title="Debug mode: OFF"><span class="btn-emoji">ğŸª²</span><span class="btn-text"> Debug mode: OFF</span></button>
        <button class="theme-toggle" id="theme-toggle" aria-label="Dark mode is on" title="Dark mode: ON"><span class="btn-emoji">ğŸŒ™</span><span class="btn-text"> Dark mode: ON</span></button>
    </div>
    <h1>â† <i>flashback</i> â†</h1>
    <p class="instruction"><i>Click on an event in the unsorted pile, <br>then click where you want to place it in the timeline.</i></p>
    
    <div class="container">
        <p id="result"></p>
        <h3> Ordered timeline</h3>
        <button class="show-date-toggle" id="show-date-toggle" aria-label="Show date is on" title="Show date">
            <input type="checkbox" id="show-date-checkbox" checked>
            <label for="show-date-checkbox"><i>show date</i></label>
        </button>
        <div id="ordered-timeline" class="timeline"></div>
        <h3> Unsorted events</h3>
        <div id="unsorted-events" class="timeline"></div>
        <br>
        <button id="new-game-btn" title="New game"><span class="btn-emoji">ğŸ†•</span><span class="btn-text"> New game</span></button>
        <button id="add-more-btn" title="Add more"><span class="btn-emoji">â•</span><span class="btn-text"> Add more</span></button>
        <button class="edit-mode-toggle" id="edit-mode-toggle" aria-label="Edit mode is off" title="Edit"><span class="btn-emoji">âœ</span><span class="btn-text"> Edit</span></button>
        <button id="shuffle-btn" class="edit-mode-only" title="Shuffle"><span class="btn-emoji">ğŸ”€</span><span class="btn-text"> Shuffle</span></button>
        <button id="reset-btn" class="edit-mode-only" title="Reset"><span class="btn-emoji">â¬‡</span><span class="btn-text"> Reset</span></button>
        <button id="randomize-btn" class="edit-mode-only" title="Randomize"><span class="btn-emoji">ğŸ²</span><span class="btn-text"> Randomize</span></button>
        <button id="clear-all-btn" class="edit-mode-only" title="Clear all"><span class="btn-emoji">ğŸ—‘</span><span class="btn-text"> Clear All</span></button>
    </div>
    <div class="edit-mode-only">
        <h2>Add a new event</h2>
        <input type="text" id="event-name" placeholder="Event Name">
        <input type="date" id="event-date">
        <button onclick="addEvent()">Add Event</button>
    </div>
    
    <!-- Dialog for New Game confirmation -->
    <div id="new-game-dialog" class="dialog-overlay hidden">
        <div class="dialog-box">
            <p class="dialog-message">Start a fresh new game?</p>
            <div class="dialog-buttons">
                <button id="dialog-yes-btn" class="dialog-btn">Yes</button>
                <button id="dialog-no-btn" class="dialog-btn">No</button>
            </div>
        </div>
    </div>
    
    <script src="script.js"></script>
    <footer>
        <p class="fine-print">For entertainment purposes only. Events are scraped from Wikipedia's Selected Anniversaries pages. May not work on all browser/devices.</p>
    </footer>
</body>
</html>